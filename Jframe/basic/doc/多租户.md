## 多租户概念

### 什么情况下会用到tenantId来区分多租户概念？

比如此项目是一个SAAS平台，腾讯和阿里都购买了此平台服务，此时用于区分腾讯和阿里的字段就是tenantId（租户id），为了保证数据隔离，业务端所有表结构都应该携带此字段。

在账号模块中，登录账号一般有唯一性校验，所以在本项目中`acc_account`是不需要携带tenantId的；

同理三方账号`acc_third_party_account`也是不需要租户id的；

但是在业务账号`acc_business_account`是需要有的，因为对于业务的curd都是在业务账号层面的；那么这里的tenantId创建时机是什么时候呢？

- 首先管理员是不需要业务账号的，管理员账号是对基本模块的数据进行添加，如组织、账号、权限，并不会操作业务相关数据。
- 普通用户是通过链接形式来进行注册，此时，就已经决定了租户id是什么，所以相关的关联信息，都需要携带租户id。

这时候有一个问题：现在阿里此服务注册了一个账号，那么此账号就无法在腾讯中注册了，会被账号唯一校验。既然是两家不同的公司为什么还会被校验？

对于这个问题从以下几点进行解释：

- 从服务提供方角度：服务是被购买而不是收购，作为服务的提供方，对账号有管理和做限制的权利，**为了便于底层账号逻辑管理**，可以使用唯一校验。
- 从服务使用者角度：登录的入口设计是统一的，并不知道你要登录的是腾讯或阿里，只有通过应用类型和账号id来找到对应的租户。

